# Vibe Kanban

Vibe Kanban is a kanban board application designed to orchestrate AI coding agents like Claude Code, Gemini CLI, Codex, Amp, and others. It enables developers to manage multiple coding tasks simultaneously, with each task running in an isolated git worktree environment. The application provides a web-based UI for creating projects, managing tasks, monitoring agent execution, reviewing code changes, and creating pull requests.

The core architecture consists of a Rust backend server with an Axum-based REST API, a React frontend, and an MCP (Model Context Protocol) server for programmatic access. Vibe Kanban supports multiple coding agents, workspace isolation via git worktrees, real-time WebSocket streams for monitoring execution, and integrations with GitHub for PR creation and merging. The application runs locally via `npx vibe-kanban` and binds to a random free port.

## Installation and Quick Start

Run Vibe Kanban directly with npx:

```bash
# Basic installation - binds to random free port
npx vibe-kanban

# Run with fixed port
PORT=8080 npx vibe-kanban

# Environment variables for configuration
HOST=0.0.0.0 PORT=3000 npx vibe-kanban
```

## REST API Endpoints

### List All Projects

Returns all projects configured in Vibe Kanban with their metadata including ID, name, and timestamps.

```bash
curl -X GET http://localhost:PORT/api/projects

# Response
{
  "success": true,
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "name": "my-frontend-app",
      "created_at": "2024-01-15T10:30:00Z",
      "updated_at": "2024-01-15T14:22:00Z"
    }
  ]
}
```

### Create a New Project

Creates a new project from an existing git repository path. The repository must be a valid git repository.

```bash
curl -X POST http://localhost:PORT/api/projects \
  -H "Content-Type: application/json" \
  -d '{
    "name": "my-new-project",
    "repositories": [
      {
        "git_repo_path": "/path/to/your/repo",
        "display_name": "Main Repository"
      }
    ]
  }'

# Response
{
  "success": true,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440001",
    "name": "my-new-project",
    "created_at": "2024-01-16T09:00:00Z",
    "updated_at": "2024-01-16T09:00:00Z"
  }
}
```

### Get Project Repositories

Retrieves all repositories associated with a specific project.

```bash
curl -X GET http://localhost:PORT/api/projects/{project_id}/repositories

# Response
{
  "success": true,
  "data": [
    {
      "id": "660e8400-e29b-41d4-a716-446655440000",
      "name": "frontend",
      "display_name": "Frontend App",
      "path": "/Users/dev/projects/frontend",
      "setup_script": "npm install",
      "cleanup_script": "npm run format",
      "dev_server_script": "npm run dev"
    }
  ]
}
```

### List Tasks in a Project

Returns all tasks in a project with their current status and execution state.

```bash
curl -X GET "http://localhost:PORT/api/tasks?project_id={project_id}"

# Response
{
  "success": true,
  "data": [
    {
      "id": "770e8400-e29b-41d4-a716-446655440000",
      "title": "Add user authentication",
      "description": "Implement login/logout with JWT tokens",
      "status": "inprogress",
      "project_id": "550e8400-e29b-41d4-a716-446655440000",
      "has_in_progress_attempt": true,
      "last_attempt_failed": false,
      "created_at": "2024-01-16T10:00:00Z",
      "updated_at": "2024-01-16T11:30:00Z"
    }
  ]
}
```

### Create a New Task

Creates a new task in a project. Tasks can optionally include images for context.

```bash
curl -X POST http://localhost:PORT/api/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "project_id": "550e8400-e29b-41d4-a716-446655440000",
    "title": "Implement dark mode toggle",
    "description": "Add a dark mode toggle to the settings page with system preference detection"
  }'

# Response
{
  "success": true,
  "data": {
    "id": "880e8400-e29b-41d4-a716-446655440000",
    "title": "Implement dark mode toggle",
    "description": "Add a dark mode toggle to the settings page with system preference detection",
    "status": "todo",
    "project_id": "550e8400-e29b-41d4-a716-446655440000",
    "created_at": "2024-01-16T12:00:00Z",
    "updated_at": "2024-01-16T12:00:00Z"
  }
}
```

### Create and Start Task with Agent

Creates a task and immediately starts a coding agent to work on it in a single operation.

```bash
curl -X POST http://localhost:PORT/api/tasks/create-and-start \
  -H "Content-Type: application/json" \
  -d '{
    "task": {
      "project_id": "550e8400-e29b-41d4-a716-446655440000",
      "title": "Fix pagination bug",
      "description": "The pagination component shows wrong page count when filtering"
    },
    "executor_profile_id": {
      "executor": "CLAUDE_CODE",
      "variant": "DEFAULT"
    },
    "repos": [
      {
        "repo_id": "660e8400-e29b-41d4-a716-446655440000",
        "target_branch": "main"
      }
    ]
  }'

# Response
{
  "success": true,
  "data": {
    "task": {
      "id": "990e8400-e29b-41d4-a716-446655440000",
      "title": "Fix pagination bug",
      "status": "inprogress"
    },
    "has_in_progress_attempt": true,
    "last_attempt_failed": false,
    "executor": "CLAUDE_CODE"
  }
}
```

### Update a Task

Updates task properties including title, description, and status.

```bash
curl -X PUT http://localhost:PORT/api/tasks/{task_id} \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Fix pagination bug - URGENT",
    "status": "inreview"
  }'

# Response
{
  "success": true,
  "data": {
    "id": "990e8400-e29b-41d4-a716-446655440000",
    "title": "Fix pagination bug - URGENT",
    "status": "inreview",
    "updated_at": "2024-01-16T14:00:00Z"
  }
}
```

### Delete a Task

Deletes a task and cleans up associated workspaces. Returns 202 Accepted as cleanup happens in background.

```bash
curl -X DELETE http://localhost:PORT/api/tasks/{task_id}

# Response (202 Accepted)
{
  "success": true,
  "data": null
}
```

### Create a Task Attempt (Workspace)

Creates a new workspace for executing a coding agent on a task. Each workspace is an isolated git worktree.

```bash
curl -X POST http://localhost:PORT/api/task-attempts \
  -H "Content-Type: application/json" \
  -d '{
    "task_id": "770e8400-e29b-41d4-a716-446655440000",
    "executor_profile_id": {
      "executor": "GEMINI",
      "variant": null
    },
    "repos": [
      {
        "repo_id": "660e8400-e29b-41d4-a716-446655440000",
        "target_branch": "develop"
      }
    ]
  }'

# Response
{
  "success": true,
  "data": {
    "id": "aa0e8400-e29b-41d4-a716-446655440000",
    "task_id": "770e8400-e29b-41d4-a716-446655440000",
    "branch": "vk/add-user-authentication-aa0e8400",
    "container_ref": "/Users/dev/.vibe-kanban/workspaces/aa0e8400",
    "archived": false,
    "pinned": false,
    "created_at": "2024-01-16T15:00:00Z"
  }
}
```

### Get Workspace Branch Status

Returns git branch status including commits ahead/behind, uncommitted changes, and merge/rebase state.

```bash
curl -X GET http://localhost:PORT/api/task-attempts/{workspace_id}/branch-status

# Response
{
  "success": true,
  "data": [
    {
      "repo_id": "660e8400-e29b-41d4-a716-446655440000",
      "repo_name": "frontend",
      "commits_ahead": 3,
      "commits_behind": 0,
      "has_uncommitted_changes": false,
      "uncommitted_count": 0,
      "untracked_count": 0,
      "target_branch_name": "main",
      "is_rebase_in_progress": false,
      "conflicted_files": [],
      "is_target_remote": false,
      "merges": []
    }
  ]
}
```

### Merge Workspace Changes

Merges the workspace branch into the target branch (local merge, not PR).

```bash
curl -X POST http://localhost:PORT/api/task-attempts/{workspace_id}/merge \
  -H "Content-Type: application/json" \
  -d '{
    "repo_id": "660e8400-e29b-41d4-a716-446655440000"
  }'

# Response
{
  "success": true,
  "data": null
}
```

### Push Workspace Branch to Remote

Pushes the workspace branch to the remote repository.

```bash
curl -X POST http://localhost:PORT/api/task-attempts/{workspace_id}/push \
  -H "Content-Type: application/json" \
  -d '{
    "repo_id": "660e8400-e29b-41d4-a716-446655440000"
  }'

# Response
{
  "success": true,
  "data": null
}

# If force push required (branch diverged)
{
  "success": false,
  "data": {
    "type": "force_push_required"
  }
}
```

### Create Pull Request

Creates a pull request on GitHub for the workspace branch.

```bash
curl -X POST http://localhost:PORT/api/task-attempts/{workspace_id}/pr \
  -H "Content-Type: application/json" \
  -d '{
    "repo_id": "660e8400-e29b-41d4-a716-446655440000",
    "title": "Add user authentication feature",
    "body": "Implements JWT-based authentication with login/logout functionality"
  }'

# Response
{
  "success": true,
  "data": {
    "pr_url": "https://github.com/owner/repo/pull/123",
    "pr_number": 123
  }
}
```

### Rebase Workspace Branch

Rebases the workspace branch onto a new base branch.

```bash
curl -X POST http://localhost:PORT/api/task-attempts/{workspace_id}/rebase \
  -H "Content-Type: application/json" \
  -d '{
    "repo_id": "660e8400-e29b-41d4-a716-446655440000",
    "new_base_branch": "main"
  }'

# Response (success)
{
  "success": true,
  "data": null
}

# Response (conflicts)
{
  "success": false,
  "data": {
    "type": "merge_conflicts",
    "message": "Rebase failed due to conflicts",
    "op": "rebase",
    "conflicted_files": ["src/auth.ts", "src/config.ts"],
    "target_branch": "main"
  }
}
```

### Start Dev Server

Starts the configured dev server script for the workspace repositories.

```bash
curl -X POST http://localhost:PORT/api/task-attempts/{workspace_id}/start-dev-server

# Response
{
  "success": true,
  "data": [
    {
      "id": "bb0e8400-e29b-41d4-a716-446655440000",
      "status": "running",
      "run_reason": "dev_server",
      "created_at": "2024-01-16T16:00:00Z"
    }
  ]
}
```

### Stop Workspace Execution

Stops any running coding agent or script in the workspace.

```bash
curl -X POST http://localhost:PORT/api/task-attempts/{workspace_id}/stop

# Response
{
  "success": true,
  "data": null
}
```

### Create Session in Workspace

Creates a new chat session within a workspace for conversing with a coding agent.

```bash
curl -X POST http://localhost:PORT/api/sessions \
  -H "Content-Type: application/json" \
  -d '{
    "workspace_id": "aa0e8400-e29b-41d4-a716-446655440000",
    "executor": "CLAUDE_CODE"
  }'

# Response
{
  "success": true,
  "data": {
    "id": "cc0e8400-e29b-41d4-a716-446655440000",
    "workspace_id": "aa0e8400-e29b-41d4-a716-446655440000",
    "executor": "CLAUDE_CODE",
    "created_at": "2024-01-16T17:00:00Z"
  }
}
```

### Send Follow-up Message to Session

Sends a follow-up message to continue the conversation with a coding agent.

```bash
curl -X POST http://localhost:PORT/api/sessions/{session_id}/follow-up \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "Now add unit tests for the authentication module",
    "executor_profile_id": {
      "executor": "CLAUDE_CODE",
      "variant": "DEFAULT"
    }
  }'

# Response
{
  "success": true,
  "data": {
    "id": "dd0e8400-e29b-41d4-a716-446655440000",
    "status": "running",
    "run_reason": "coding_agent",
    "created_at": "2024-01-16T17:30:00Z"
  }
}
```

### Get User System Info and Config

Returns system information, user configuration, available coding agents, and their capabilities.

```bash
curl -X GET http://localhost:PORT/api/info

# Response
{
  "success": true,
  "data": {
    "config": {
      "disclaimer_acknowledged": true,
      "analytics_enabled": false,
      "editor": "vscode",
      "git_branch_prefix": "vk",
      "default_branch": "main"
    },
    "analytics_user_id": "user-123",
    "login_status": "logged_out",
    "executors": {
      "CLAUDE_CODE": { "variants": ["DEFAULT", "PLAN"] },
      "GEMINI": { "variants": ["DEFAULT"] },
      "CODEX": { "variants": ["DEFAULT"] },
      "AMP": { "variants": ["DEFAULT"] }
    },
    "capabilities": {
      "CLAUDE_CODE": ["SESSION_FORK"]
    },
    "environment": {
      "os_type": "macos",
      "os_version": "14.0.0",
      "os_architecture": "arm64"
    }
  }
}
```

### Update User Configuration

Updates user preferences including editor, git settings, and feature flags.

```bash
curl -X PUT http://localhost:PORT/api/config \
  -H "Content-Type: application/json" \
  -d '{
    "editor": "cursor",
    "git_branch_prefix": "feature",
    "default_branch": "develop",
    "analytics_enabled": false,
    "sound_enabled": true
  }'

# Response
{
  "success": true,
  "data": {
    "editor": "cursor",
    "git_branch_prefix": "feature",
    "default_branch": "develop"
  }
}
```

### Get MCP Server Configuration

Retrieves the MCP server configuration for a specific coding agent.

```bash
curl -X GET "http://localhost:PORT/api/mcp-config?executor=CLAUDE_CODE"

# Response
{
  "success": true,
  "data": {
    "mcp_config": {
      "servers": {
        "vibe_kanban": {
          "command": "npx",
          "args": ["-y", "vibe-kanban@latest", "--mcp"]
        }
      },
      "servers_path": ["mcpServers"]
    },
    "config_path": "/Users/dev/.claude/settings.json"
  }
}
```

### Update MCP Server Configuration

Updates the MCP servers configuration for a specific coding agent.

```bash
curl -X POST "http://localhost:PORT/api/mcp-config?executor=CLAUDE_CODE" \
  -H "Content-Type: application/json" \
  -d '{
    "servers": {
      "vibe_kanban": {
        "command": "npx",
        "args": ["-y", "vibe-kanban@latest", "--mcp"]
      },
      "filesystem": {
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-filesystem", "/path/to/dir"]
      }
    }
  }'

# Response
{
  "success": true,
  "data": "Updated MCP server configuration (was 1, now 2)"
}
```

### Check Agent Availability

Checks if a specific coding agent is installed and available on the system.

```bash
curl -X GET "http://localhost:PORT/api/agents/check-availability?executor=CLAUDE_CODE"

# Response
{
  "success": true,
  "data": {
    "status": "available",
    "version": "1.0.0",
    "path": "/usr/local/bin/claude"
  }
}
```

## WebSocket Endpoints

### Stream Projects Updates

Real-time updates when projects are created, modified, or deleted.

```javascript
const ws = new WebSocket('ws://localhost:PORT/api/projects/stream/ws');

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  // data contains project updates with JSON patches
  console.log('Project update:', data);
};
```

### Stream Tasks Updates

Real-time updates for tasks in a specific project.

```javascript
const projectId = '550e8400-e29b-41d4-a716-446655440000';
const ws = new WebSocket(`ws://localhost:PORT/api/tasks/stream/ws?project_id=${projectId}`);

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  // data contains task updates including status changes
  console.log('Task update:', data);
};
```

### Stream Workspace Diff

Real-time file changes and diff updates for a workspace.

```javascript
const workspaceId = 'aa0e8400-e29b-41d4-a716-446655440000';
const ws = new WebSocket(`ws://localhost:PORT/api/task-attempts/${workspaceId}/diff/ws`);

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  // data contains file diffs, additions, deletions
  console.log('Diff update:', data);
};

// For stats only (files changed count, lines added/removed)
const wsStats = new WebSocket(`ws://localhost:PORT/api/task-attempts/${workspaceId}/diff/ws?stats_only=true`);
```

### Stream Workspaces Updates

Real-time updates for all workspaces, optionally filtered by archived status.

```javascript
// Stream all active workspaces
const ws = new WebSocket('ws://localhost:PORT/api/task-attempts/stream/ws?archived=false&limit=50');

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log('Workspace update:', data);
};
```

## MCP Server Integration

Vibe Kanban exposes an MCP server for programmatic task management from AI assistants.

### MCP Server Configuration

Add Vibe Kanban to your coding agent's MCP configuration:

```json
{
  "mcpServers": {
    "vibe_kanban": {
      "command": "npx",
      "args": ["-y", "vibe-kanban@latest", "--mcp"]
    }
  }
}
```

### MCP Tool: list_projects

Lists all available projects.

```json
// Request
{
  "tool": "list_projects",
  "arguments": {}
}

// Response
{
  "projects": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "name": "my-frontend-app",
      "created_at": "2024-01-15T10:30:00Z",
      "updated_at": "2024-01-15T14:22:00Z"
    }
  ],
  "count": 1
}
```

### MCP Tool: list_tasks

Lists tasks in a project with optional filtering.

```json
// Request
{
  "tool": "list_tasks",
  "arguments": {
    "project_id": "550e8400-e29b-41d4-a716-446655440000",
    "status": "todo",
    "limit": 10
  }
}

// Response
{
  "tasks": [
    {
      "id": "770e8400-e29b-41d4-a716-446655440000",
      "title": "Add user authentication",
      "status": "todo",
      "has_in_progress_attempt": false,
      "last_attempt_failed": false
    }
  ],
  "count": 1,
  "project_id": "550e8400-e29b-41d4-a716-446655440000",
  "applied_filters": {
    "status": "todo",
    "limit": 10
  }
}
```

### MCP Tool: create_task

Creates a new task in a project. Supports @tagname expansion for reusable text snippets.

```json
// Request
{
  "tool": "create_task",
  "arguments": {
    "project_id": "550e8400-e29b-41d4-a716-446655440000",
    "title": "Implement user settings page",
    "description": "Create a settings page with profile editing @coding-standards"
  }
}

// Response
{
  "task_id": "880e8400-e29b-41d4-a716-446655440000"
}
```

### MCP Tool: start_workspace_session

Starts a coding agent session for a task.

```json
// Request
{
  "tool": "start_workspace_session",
  "arguments": {
    "task_id": "770e8400-e29b-41d4-a716-446655440000",
    "executor": "CLAUDE_CODE",
    "variant": "DEFAULT",
    "repos": [
      {
        "repo_id": "660e8400-e29b-41d4-a716-446655440000",
        "base_branch": "main"
      }
    ]
  }
}

// Response
{
  "task_id": "770e8400-e29b-41d4-a716-446655440000",
  "workspace_id": "aa0e8400-e29b-41d4-a716-446655440000"
}
```

### MCP Tool: get_context

Returns workspace context when running inside an active Vibe Kanban session.

```json
// Request
{
  "tool": "get_context",
  "arguments": {}
}

// Response
{
  "project_id": "550e8400-e29b-41d4-a716-446655440000",
  "task_id": "770e8400-e29b-41d4-a716-446655440000",
  "task_title": "Add user authentication",
  "workspace_id": "aa0e8400-e29b-41d4-a716-446655440000",
  "workspace_branch": "vk/add-user-authentication-aa0e8400",
  "workspace_repos": [
    {
      "repo_id": "660e8400-e29b-41d4-a716-446655440000",
      "repo_name": "frontend",
      "target_branch": "main"
    }
  ]
}
```

### MCP Tool: update_task

Updates an existing task's properties.

```json
// Request
{
  "tool": "update_task",
  "arguments": {
    "task_id": "770e8400-e29b-41d4-a716-446655440000",
    "title": "Add user authentication - Phase 1",
    "status": "inprogress"
  }
}

// Response
{
  "task": {
    "id": "770e8400-e29b-41d4-a716-446655440000",
    "title": "Add user authentication - Phase 1",
    "status": "inprogress"
  }
}
```

### MCP Tool: list_repos

Lists repositories for a project.

```json
// Request
{
  "tool": "list_repos",
  "arguments": {
    "project_id": "550e8400-e29b-41d4-a716-446655440000"
  }
}

// Response
{
  "repos": [
    {
      "id": "660e8400-e29b-41d4-a716-446655440000",
      "name": "frontend"
    }
  ],
  "count": 1,
  "project_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

### MCP Tool: update_setup_script

Updates a repository's setup script that runs before agent execution.

```json
// Request
{
  "tool": "update_setup_script",
  "arguments": {
    "repo_id": "660e8400-e29b-41d4-a716-446655440000",
    "script": "npm install && npm run build"
  }
}

// Response
{
  "success": true,
  "repo_id": "660e8400-e29b-41d4-a716-446655440000",
  "field": "setup_script"
}
```

## Supported Coding Agents

Vibe Kanban supports the following coding agents (case-insensitive):

```
CLAUDE_CODE / claude-code    - Anthropic's Claude Code
AMP / amp                    - Sourcegraph Amp
GEMINI / gemini              - Google Gemini CLI
CODEX / codex                - OpenAI Codex
OPENCODE / opencode          - OpenCode
CURSOR_AGENT / cursor-agent  - Cursor Agent
QWEN_CODE / qwen-code        - Qwen Code
COPILOT / copilot            - GitHub Copilot
DROID / droid                - Droid
```

## Summary

Vibe Kanban serves as a central orchestration layer for AI-assisted software development, enabling teams to manage multiple coding tasks simultaneously with proper isolation and version control. The primary use cases include: (1) orchestrating multiple AI coding agents in parallel across different tasks, (2) managing code review workflows with automatic git worktree isolation, (3) integrating AI assistants into existing development workflows via the MCP protocol, and (4) providing a unified interface for monitoring and controlling agent execution across projects.

Integration patterns typically involve running Vibe Kanban as a local service via `npx vibe-kanban`, connecting coding agents through the MCP server configuration, and using the REST API or WebSocket streams for automation and monitoring. The application supports both interactive use through the web UI and programmatic access for CI/CD integration, automated task creation from project management tools, or building custom workflows around AI-assisted development. For multi-repository projects, Vibe Kanban handles workspace creation across all repos with coordinated branching and merge operations.
